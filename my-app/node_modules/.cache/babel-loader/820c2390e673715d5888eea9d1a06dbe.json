{"ast":null,"code":"var _jsxFileName = \"/Users/nguyenthanhhuy/Documents/GitHub/ThucTapReactJS/my-app/src/components/BatchStudent/index.js\",\n    _s = $RefreshSig$();\n\nimport \"devextreme/dist/css/dx.common.css\";\nimport \"devextreme/dist/css/dx.light.css\";\nimport React, { useEffect, useState, useRef, useCallback } from \"react\";\nimport ArrayStore from \"devextreme/data/array_store\";\nimport DataSource from \"devextreme/data/data_source\";\nimport { LoadPanel } from \"devextreme-react/load-panel\";\nimport \"./BatchStudent.css\";\nimport DataGrid, { Column, Paging, Pager, Editing, Popup, Toolbar, Item, RequiredRule } from \"devextreme-react/data-grid\";\nimport { TextField, Button } from \"@material-ui/core\";\nimport { useForm, Controller } from \"react-hook-form\"; // Toast\n\nimport { toast } from \"react-toastify\";\nimport \"react-toastify/dist/ReactToastify.css\";\nimport useGetData from \"./../PopUpStudent/hooks/useGetData\";\nimport useDeleteData from \"./../PopUpStudent/hooks/useDeleteData\";\nimport useCreateData from \"./../PopUpStudent/hooks/useCreateData\";\nimport useUpdateData from \"./../PopUpStudent/hooks/useUpdateData\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst allowedPageSizes = [5, 10, \"all\"]; /////////\n\ntoast.configure();\n\nconst BatchStudent = () => {\n  _s();\n\n  const {\n    refetchStudent,\n    dataStudent,\n    isErrorStudent,\n    isLoadingStudent\n  } = useGetData();\n  const studentDataSource = new DataSource({\n    store: new ArrayStore({\n      key: \"id\",\n      data: dataStudent // Other ArrayStore properties go here\n\n    }),\n    // Other DataSource properties go here\n    reshapeOnPush: true\n  }); //State\n\n  const [isLoadingPanel, setIsLoadingPanel] = useState(false);\n  const [changes, setChanges] = useState([]);\n  const [editRowKey, setEditRowKey] = useState(null);\n  const createMutation = useCreateData();\n  const updateMutation = useUpdateData();\n  const deleteMutation = useDeleteData(); // Save params\n\n  const gridRef = useRef(null);\n\n  const renderButton = cell => {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        display: \"flex\",\n        justifyContent: \"space-between\"\n      },\n      children: [/*#__PURE__*/_jsxDEV(Button, {\n        variant: \"contained\",\n        onClick: () => {\n          var _gridRef$current, _gridRef$current$inst;\n\n          (_gridRef$current = gridRef.current) === null || _gridRef$current === void 0 ? void 0 : (_gridRef$current$inst = _gridRef$current.instance) === null || _gridRef$current$inst === void 0 ? void 0 : _gridRef$current$inst.deleteRow(cell.rowIndex);\n        },\n        children: \"remove\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 67,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Button, {\n        variant: \"contained\" // disabled={isAddButtonVisible}\n        ,\n        onClick: () => {\n          var _gridRef$current2, _gridRef$current2$ins;\n\n          (_gridRef$current2 = gridRef.current) === null || _gridRef$current2 === void 0 ? void 0 : (_gridRef$current2$ins = _gridRef$current2.instance) === null || _gridRef$current2$ins === void 0 ? void 0 : _gridRef$current2$ins.undeleteRow(cell.rowIndex);\n        },\n        children: \"unremove\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 75,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 7\n    }, this);\n  };\n\n  const onChangesChange = React.useCallback(changes => {\n    console.log(\"change: \" + changes);\n    setChanges(changes);\n  }, []);\n\n  const onCellClick = e => {\n    var _gridRef$current3, _gridRef$current3$ins;\n\n    (_gridRef$current3 = gridRef.current) === null || _gridRef$current3 === void 0 ? void 0 : (_gridRef$current3$ins = _gridRef$current3.instance) === null || _gridRef$current3$ins === void 0 ? void 0 : _gridRef$current3$ins.editCell(e.rowIndex, e.columnIndex);\n  }; // Note usually that Create Field default when add row\n\n\n  const onInitRow = e => {\n    e.data.createDate = new Date(); // e.data.id = Math.ceil(Math.random() * (10000 - 100) + 100);\n  };\n\n  const onEditRowKeyChange = React.useCallback(editRowKey => {\n    console.log(editRowKey);\n    setEditRowKey(editRowKey);\n  }, []);\n  const onSaving = React.useCallback(e => {\n    var _gridRef$current4, _gridRef$current4$ins, _gridRef$current5, _gridRef$current5$ins;\n\n    // e.cancel = true;\n    (_gridRef$current4 = gridRef.current) === null || _gridRef$current4 === void 0 ? void 0 : (_gridRef$current4$ins = _gridRef$current4.instance) === null || _gridRef$current4$ins === void 0 ? void 0 : _gridRef$current4$ins.beginUpdate();\n    const data = e.changes;\n\n    for (let i = 0; i < data.length; i++) {\n      if (data[i].type === \"insert\") {\n        createMutation.mutate(data[i].data);\n        console.log(\"INSERT\");\n      } else if (data[i].type === \"update\") {\n        updateMutation.mutate(data[i].data);\n        console.log(\"UPDATE\");\n      } else {\n        deleteMutation.mutate(data[i].key.id);\n        console.log(\"REMOVE\");\n      }\n    }\n\n    (_gridRef$current5 = gridRef.current) === null || _gridRef$current5 === void 0 ? void 0 : (_gridRef$current5$ins = _gridRef$current5.instance) === null || _gridRef$current5$ins === void 0 ? void 0 : _gridRef$current5$ins.endUpdate();\n  }, [createMutation, updateMutation, deleteMutation]);\n  return isLoadingStudent ? /*#__PURE__*/_jsxDEV(\"div\", {\n    children: \"Loading...\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 129,\n    columnNumber: 5\n  }, this) : isErrorStudent ? /*#__PURE__*/_jsxDEV(\"div\", {\n    children: \"An error while fetching posts\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 131,\n    columnNumber: 5\n  }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"main__title\",\n      children: /*#__PURE__*/_jsxDEV(\"h1\", {\n        children: \"Manage Data Student\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 135,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 134,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"main__Add\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 138,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"main__body\",\n      children: /*#__PURE__*/_jsxDEV(DataGrid // keyExpr=\"id\"\n      , {\n        showBorders: true,\n        dataSource: dataStudent,\n        remoteOperations: true,\n        ref: gridRef,\n        repaintChangesOnly: true,\n        onCellClick: onCellClick,\n        onInitNewRow: onInitRow,\n        onSaving: onSaving,\n        loadPanel: true,\n        onSaved: onSaved,\n        children: [/*#__PURE__*/_jsxDEV(LoadPanel, {\n          shadingColor: \"rgba(0,0,0,0.4)\",\n          visible: isLoadingPanel,\n          showIndicator: true,\n          shading: true,\n          showPane: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 153,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(Paging, {\n          defaultPageSize: 5\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 160,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Pager, {\n          visible: true,\n          allowedPageSizes: allowedPageSizes,\n          displayMode: \"compact\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 161,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Editing, {\n          mode: \"batch\",\n          useIcons: true,\n          changes: changes,\n          onChangesChange: onChangesChange,\n          editRowKey: editRowKey,\n          onEditRowKeyChange: onEditRowKeyChange,\n          children: /*#__PURE__*/_jsxDEV(TextField, {\n            label: \"Student\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 174,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 166,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Column, {\n          dataField: \"nameStudent\",\n          dataType: \"string\",\n          children: [\" \", /*#__PURE__*/_jsxDEV(RequiredRule, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 179,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 177,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Column, {\n          dataField: \"phoneStudent\",\n          dataType: \"string\",\n          children: [\" \", /*#__PURE__*/_jsxDEV(RequiredRule, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 183,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 181,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Column, {\n          dataField: \"dateOfBirth\",\n          dataType: \"date\",\n          format: \"dd/MM/yyyy\",\n          children: [\" \", /*#__PURE__*/_jsxDEV(RequiredRule, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 187,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 185,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Column, {\n          dataField: \"createDate\",\n          dataType: \"date\",\n          visible: false,\n          defaultSortOrder: \"asc\" // value={date}\n\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 189,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Column, {\n          dataField: \"scoreStudent\",\n          dataType: \"number\",\n          children: [\" \", /*#__PURE__*/_jsxDEV(RequiredRule, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 199,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 197,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Column, {\n          dataField: \"\",\n          cellRender: renderButton\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 201,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Toolbar, {\n          children: [/*#__PURE__*/_jsxDEV(Item, {\n            location: \"after\",\n            children: /*#__PURE__*/_jsxDEV(Button, {\n              variant: \"contained\",\n              icon: \"refresh\",\n              onClick: () => {\n                var _gridRef$current6, _gridRef$current6$ins;\n\n                return (_gridRef$current6 = gridRef.current) === null || _gridRef$current6 === void 0 ? void 0 : (_gridRef$current6$ins = _gridRef$current6.instance) === null || _gridRef$current6$ins === void 0 ? void 0 : _gridRef$current6$ins.cancelEditData();\n              },\n              children: \"Discard\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 205,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 204,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Item, {\n            location: \"after\",\n            children: /*#__PURE__*/_jsxDEV(Button, {\n              variant: \"contained\",\n              icon: \"refresh\",\n              onClick: () => {\n                var _gridRef$current7, _gridRef$current7$ins;\n\n                (_gridRef$current7 = gridRef.current) === null || _gridRef$current7 === void 0 ? void 0 : (_gridRef$current7$ins = _gridRef$current7.instance) === null || _gridRef$current7$ins === void 0 ? void 0 : _gridRef$current7$ins.saveEditData();\n                setIsLoadingPanel(true);\n              },\n              viable: false,\n              children: \"Save\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 214,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 213,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Item, {\n            children: /*#__PURE__*/_jsxDEV(Button, {\n              variant: \"contained\",\n              onClick: () => {\n                var _gridRef$current8, _gridRef$current8$ins;\n\n                return (_gridRef$current8 = gridRef.current) === null || _gridRef$current8 === void 0 ? void 0 : (_gridRef$current8$ins = _gridRef$current8.instance) === null || _gridRef$current8$ins === void 0 ? void 0 : _gridRef$current8$ins.addRow();\n              },\n              children: \"add\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 226,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 225,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 203,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 140,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 139,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 133,\n    columnNumber: 5\n  }, this);\n}; //Create content customize Form\n\n\n_s(BatchStudent, \"znme6xwkZ/RUnKI12Z7a9qBBICU=\", false, function () {\n  return [useGetData, useCreateData, useUpdateData, useDeleteData];\n});\n\n_c = BatchStudent;\nexport default BatchStudent;\n\nvar _c;\n\n$RefreshReg$(_c, \"BatchStudent\");","map":{"version":3,"sources":["/Users/nguyenthanhhuy/Documents/GitHub/ThucTapReactJS/my-app/src/components/BatchStudent/index.js"],"names":["React","useEffect","useState","useRef","useCallback","ArrayStore","DataSource","LoadPanel","DataGrid","Column","Paging","Pager","Editing","Popup","Toolbar","Item","RequiredRule","TextField","Button","useForm","Controller","toast","useGetData","useDeleteData","useCreateData","useUpdateData","allowedPageSizes","configure","BatchStudent","refetchStudent","dataStudent","isErrorStudent","isLoadingStudent","studentDataSource","store","key","data","reshapeOnPush","isLoadingPanel","setIsLoadingPanel","changes","setChanges","editRowKey","setEditRowKey","createMutation","updateMutation","deleteMutation","gridRef","renderButton","cell","display","justifyContent","current","instance","deleteRow","rowIndex","undeleteRow","onChangesChange","console","log","onCellClick","e","editCell","columnIndex","onInitRow","createDate","Date","onEditRowKeyChange","onSaving","beginUpdate","i","length","type","mutate","id","endUpdate","onSaved","cancelEditData","saveEditData","addRow"],"mappings":";;;AAAA,OAAO,mCAAP;AACA,OAAO,kCAAP;AACA,OAAOA,KAAP,IAAgBC,SAAhB,EAA2BC,QAA3B,EAAqCC,MAArC,EAA6CC,WAA7C,QAAgE,OAAhE;AACA,OAAOC,UAAP,MAAuB,6BAAvB;AACA,OAAOC,UAAP,MAAuB,6BAAvB;AACA,SAASC,SAAT,QAA0B,6BAA1B;AAEA,OAAO,oBAAP;AACA,OAAOC,QAAP,IACEC,MADF,EAEEC,MAFF,EAGEC,KAHF,EAIEC,OAJF,EAKEC,KALF,EAMEC,OANF,EAOEC,IAPF,EAQEC,YARF,QASO,4BATP;AAUA,SAASC,SAAT,EAAoBC,MAApB,QAAkC,mBAAlC;AAEA,SAASC,OAAT,EAAkBC,UAAlB,QAAoC,iBAApC,C,CAEA;;AACA,SAASC,KAAT,QAAsB,gBAAtB;AACA,OAAO,uCAAP;AACA,OAAOC,UAAP,MAAuB,oCAAvB;AACA,OAAOC,aAAP,MAA0B,uCAA1B;AACA,OAAOC,aAAP,MAA0B,uCAA1B;AACA,OAAOC,aAAP,MAA0B,uCAA1B;;AACA,MAAMC,gBAAgB,GAAG,CAAC,CAAD,EAAI,EAAJ,EAAQ,KAAR,CAAzB,C,CAEA;;AACAL,KAAK,CAACM,SAAN;;AACA,MAAMC,YAAY,GAAG,MAAM;AAAA;;AACzB,QAAM;AACJC,IAAAA,cADI;AAGJC,IAAAA,WAHI;AAIJC,IAAAA,cAJI;AAKJC,IAAAA;AALI,MAMFV,UAAU,EANd;AAOA,QAAMW,iBAAiB,GAAG,IAAI3B,UAAJ,CAAe;AACvC4B,IAAAA,KAAK,EAAE,IAAI7B,UAAJ,CAAe;AACpB8B,MAAAA,GAAG,EAAE,IADe;AAEpBC,MAAAA,IAAI,EAAEN,WAFc,CAIpB;;AAJoB,KAAf,CADgC;AAOvC;AAEAO,IAAAA,aAAa,EAAE;AATwB,GAAf,CAA1B,CARyB,CAmBzB;;AACA,QAAM,CAACC,cAAD,EAAiBC,iBAAjB,IAAsCrC,QAAQ,CAAC,KAAD,CAApD;AAEA,QAAM,CAACsC,OAAD,EAAUC,UAAV,IAAwBvC,QAAQ,CAAC,EAAD,CAAtC;AACA,QAAM,CAACwC,UAAD,EAAaC,aAAb,IAA8BzC,QAAQ,CAAC,IAAD,CAA5C;AACA,QAAM0C,cAAc,GAAGpB,aAAa,EAApC;AACA,QAAMqB,cAAc,GAAGpB,aAAa,EAApC;AACA,QAAMqB,cAAc,GAAGvB,aAAa,EAApC,CA1ByB,CA2BzB;;AACA,QAAMwB,OAAO,GAAG5C,MAAM,CAAC,IAAD,CAAtB;;AAEA,QAAM6C,YAAY,GAAIC,IAAD,IAAU;AAC7B,wBACE;AAAK,MAAA,KAAK,EAAE;AAAEC,QAAAA,OAAO,EAAE,MAAX;AAAmBC,QAAAA,cAAc,EAAE;AAAnC,OAAZ;AAAA,8BACE,QAAC,MAAD;AACE,QAAA,OAAO,EAAC,WADV;AAEE,QAAA,OAAO,EAAE,MAAM;AAAA;;AACb,8BAAAJ,OAAO,CAACK,OAAR,+FAAiBC,QAAjB,gFAA2BC,SAA3B,CAAqCL,IAAI,CAACM,QAA1C;AACD,SAJH;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cADF,eASE,QAAC,MAAD;AACE,QAAA,OAAO,EAAC,WADV,CAEE;AAFF;AAGE,QAAA,OAAO,EAAE,MAAM;AAAA;;AACb,+BAAAR,OAAO,CAACK,OAAR,iGAAiBC,QAAjB,gFAA2BG,WAA3B,CAAuCP,IAAI,CAACM,QAA5C;AACD,SALH;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cATF;AAAA;AAAA;AAAA;AAAA;AAAA,YADF;AAqBD,GAtBD;;AAwBA,QAAME,eAAe,GAAGzD,KAAK,CAACI,WAAN,CAAmBoC,OAAD,IAAa;AACrDkB,IAAAA,OAAO,CAACC,GAAR,CAAY,aAAanB,OAAzB;AACAC,IAAAA,UAAU,CAACD,OAAD,CAAV;AACD,GAHuB,EAGrB,EAHqB,CAAxB;;AAIA,QAAMoB,WAAW,GAAIC,CAAD,IAAO;AAAA;;AACzB,yBAAAd,OAAO,CAACK,OAAR,iGAAiBC,QAAjB,gFAA2BS,QAA3B,CAAoCD,CAAC,CAACN,QAAtC,EAAgDM,CAAC,CAACE,WAAlD;AACD,GAFD,CA1DyB,CA8DzB;;;AACA,QAAMC,SAAS,GAAIH,CAAD,IAAO;AACvBA,IAAAA,CAAC,CAACzB,IAAF,CAAO6B,UAAP,GAAoB,IAAIC,IAAJ,EAApB,CADuB,CAEvB;AACD,GAHD;;AAIA,QAAMC,kBAAkB,GAAGnE,KAAK,CAACI,WAAN,CAAmBsC,UAAD,IAAgB;AAC3DgB,IAAAA,OAAO,CAACC,GAAR,CAAYjB,UAAZ;AACAC,IAAAA,aAAa,CAACD,UAAD,CAAb;AACD,GAH0B,EAGxB,EAHwB,CAA3B;AAIA,QAAM0B,QAAQ,GAAGpE,KAAK,CAACI,WAAN,CACdyD,CAAD,IAAO;AAAA;;AACL;AACA,yBAAAd,OAAO,CAACK,OAAR,iGAAiBC,QAAjB,gFAA2BgB,WAA3B;AACA,UAAMjC,IAAI,GAAGyB,CAAC,CAACrB,OAAf;;AACA,SAAK,IAAI8B,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGlC,IAAI,CAACmC,MAAzB,EAAiCD,CAAC,EAAlC,EAAsC;AACpC,UAAIlC,IAAI,CAACkC,CAAD,CAAJ,CAAQE,IAAR,KAAiB,QAArB,EAA+B;AAC7B5B,QAAAA,cAAc,CAAC6B,MAAf,CAAsBrC,IAAI,CAACkC,CAAD,CAAJ,CAAQlC,IAA9B;AAEAsB,QAAAA,OAAO,CAACC,GAAR,CAAY,QAAZ;AACD,OAJD,MAIO,IAAIvB,IAAI,CAACkC,CAAD,CAAJ,CAAQE,IAAR,KAAiB,QAArB,EAA+B;AACpC3B,QAAAA,cAAc,CAAC4B,MAAf,CAAsBrC,IAAI,CAACkC,CAAD,CAAJ,CAAQlC,IAA9B;AAEAsB,QAAAA,OAAO,CAACC,GAAR,CAAY,QAAZ;AACD,OAJM,MAIA;AACLb,QAAAA,cAAc,CAAC2B,MAAf,CAAsBrC,IAAI,CAACkC,CAAD,CAAJ,CAAQnC,GAAR,CAAYuC,EAAlC;AACAhB,QAAAA,OAAO,CAACC,GAAR,CAAY,QAAZ;AACD;AACF;;AACD,yBAAAZ,OAAO,CAACK,OAAR,iGAAiBC,QAAjB,gFAA2BsB,SAA3B;AACD,GApBc,EAqBf,CAAC/B,cAAD,EAAiBC,cAAjB,EAAiCC,cAAjC,CArBe,CAAjB;AAuBA,SAAOd,gBAAgB,gBACrB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UADqB,GAEnBD,cAAc,gBAChB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UADgB,gBAGhB;AAAA,4BACE;AAAK,MAAA,SAAS,EAAC,aAAf;AAAA,6BACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,YADF,eAKE;AAAK,MAAA,SAAS,EAAC;AAAf;AAAA;AAAA;AAAA;AAAA,YALF,eAME;AAAK,MAAA,SAAS,EAAC,YAAf;AAAA,6BACE,QAAC,QAAD,CACE;AADF;AAEE,QAAA,WAAW,MAFb;AAGE,QAAA,UAAU,EAAED,WAHd;AAIE,QAAA,gBAAgB,EAAE,IAJpB;AAKE,QAAA,GAAG,EAAEiB,OALP;AAME,QAAA,kBAAkB,EAAE,IANtB;AAOE,QAAA,WAAW,EAAEa,WAPf;AAQE,QAAA,YAAY,EAAEI,SARhB;AASE,QAAA,QAAQ,EAAEI,QATZ;AAUE,QAAA,SAAS,MAVX;AAWE,QAAA,OAAO,EAAEQ,OAXX;AAAA,gCAaA,QAAC,SAAD;AACQ,UAAA,YAAY,EAAC,iBADrB;AAEQ,UAAA,OAAO,EAAEtC,cAFjB;AAGQ,UAAA,aAAa,EAAE,IAHvB;AAIQ,UAAA,OAAO,EAAE,IAJjB;AAKQ,UAAA,QAAQ,EAAE;AALlB;AAAA;AAAA;AAAA;AAAA,gBAbA,eAoBE,QAAC,MAAD;AAAQ,UAAA,eAAe,EAAE;AAAzB;AAAA;AAAA;AAAA;AAAA,gBApBF,eAqBE,QAAC,KAAD;AACE,UAAA,OAAO,EAAE,IADX;AAEE,UAAA,gBAAgB,EAAEZ,gBAFpB;AAGE,UAAA,WAAW,EAAC;AAHd;AAAA;AAAA;AAAA;AAAA,gBArBF,eA0BE,QAAC,OAAD;AACE,UAAA,IAAI,EAAC,OADP;AAEE,UAAA,QAAQ,EAAE,IAFZ;AAGE,UAAA,OAAO,EAAEc,OAHX;AAIE,UAAA,eAAe,EAAEiB,eAJnB;AAKE,UAAA,UAAU,EAAEf,UALd;AAME,UAAA,kBAAkB,EAAEyB,kBANtB;AAAA,iCAQE,QAAC,SAAD;AAAW,YAAA,KAAK,EAAC;AAAjB;AAAA;AAAA;AAAA;AAAA;AARF;AAAA;AAAA;AAAA;AAAA,gBA1BF,eAqCE,QAAC,MAAD;AAAQ,UAAA,SAAS,EAAC,aAAlB;AAAgC,UAAA,QAAQ,EAAC,QAAzC;AAAA,qBACG,GADH,eAEE,QAAC,YAAD;AAAA;AAAA;AAAA;AAAA,kBAFF;AAAA;AAAA;AAAA;AAAA;AAAA,gBArCF,eAyCE,QAAC,MAAD;AAAQ,UAAA,SAAS,EAAC,cAAlB;AAAiC,UAAA,QAAQ,EAAC,QAA1C;AAAA,qBACG,GADH,eAEE,QAAC,YAAD;AAAA;AAAA;AAAA;AAAA,kBAFF;AAAA;AAAA;AAAA;AAAA;AAAA,gBAzCF,eA6CE,QAAC,MAAD;AAAQ,UAAA,SAAS,EAAC,aAAlB;AAAgC,UAAA,QAAQ,EAAC,MAAzC;AAAgD,UAAA,MAAM,EAAC,YAAvD;AAAA,qBACG,GADH,eAEE,QAAC,YAAD;AAAA;AAAA;AAAA;AAAA,kBAFF;AAAA;AAAA;AAAA;AAAA;AAAA,gBA7CF,eAiDE,QAAC,MAAD;AACE,UAAA,SAAS,EAAC,YADZ;AAEE,UAAA,QAAQ,EAAC,MAFX;AAGE,UAAA,OAAO,EAAE,KAHX;AAIE,UAAA,gBAAgB,EAAC,KAJnB,CAKE;;AALF;AAAA;AAAA;AAAA;AAAA,gBAjDF,eAyDE,QAAC,MAAD;AAAQ,UAAA,SAAS,EAAC,cAAlB;AAAiC,UAAA,QAAQ,EAAC,QAA1C;AAAA,qBACG,GADH,eAEE,QAAC,YAAD;AAAA;AAAA;AAAA;AAAA,kBAFF;AAAA;AAAA;AAAA;AAAA;AAAA,gBAzDF,eA6DE,QAAC,MAAD;AAAQ,UAAA,SAAS,EAAC,EAAlB;AAAqB,UAAA,UAAU,EAAEnB;AAAjC;AAAA;AAAA;AAAA;AAAA,gBA7DF,eA+DE,QAAC,OAAD;AAAA,kCACE,QAAC,IAAD;AAAM,YAAA,QAAQ,EAAC,OAAf;AAAA,mCACE,QAAC,MAAD;AACE,cAAA,OAAO,EAAC,WADV;AAEE,cAAA,IAAI,EAAC,SAFP;AAGE,cAAA,OAAO,EAAE;AAAA;;AAAA,4CAAMD,OAAO,CAACK,OAAd,+EAAM,kBAAiBC,QAAvB,0DAAM,sBAA2BwB,cAA3B,EAAN;AAAA,eAHX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,kBADF,eAUE,QAAC,IAAD;AAAM,YAAA,QAAQ,EAAC,OAAf;AAAA,mCACE,QAAC,MAAD;AACE,cAAA,OAAO,EAAC,WADV;AAEE,cAAA,IAAI,EAAC,SAFP;AAGE,cAAA,OAAO,EAAE,MAAM;AAAA;;AAAC,qCAAA9B,OAAO,CAACK,OAAR,iGAAiBC,QAAjB,gFAA2ByB,YAA3B;AAChBvC,gBAAAA,iBAAiB,CAAC,IAAD,CAAjB;AACC,eALH;AAME,cAAA,MAAM,EAAE,KANV;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,kBAVF,eAsBE,QAAC,IAAD;AAAA,mCACE,QAAC,MAAD;AACE,cAAA,OAAO,EAAC,WADV;AAEE,cAAA,OAAO,EAAE;AAAA;;AAAA,4CAAMQ,OAAO,CAACK,OAAd,+EAAM,kBAAiBC,QAAvB,0DAAM,sBAA2B0B,MAA3B,EAAN;AAAA,eAFX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,kBAtBF;AAAA;AAAA;AAAA;AAAA;AAAA,gBA/DF;AAAA;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,YANF;AAAA;AAAA;AAAA;AAAA;AAAA,UALF;AAgHD,CA9MD,C,CA+MA;;;GA/MMnD,Y;UAOAN,U,EAiBmBE,a,EACAC,a,EACAF,a;;;KA1BnBK,Y;AAiNN,eAAeA,YAAf","sourcesContent":["import \"devextreme/dist/css/dx.common.css\";\nimport \"devextreme/dist/css/dx.light.css\";\nimport React, { useEffect, useState, useRef, useCallback } from \"react\";\nimport ArrayStore from \"devextreme/data/array_store\";\nimport DataSource from \"devextreme/data/data_source\";\nimport { LoadPanel } from \"devextreme-react/load-panel\";\n\nimport \"./BatchStudent.css\";\nimport DataGrid, {\n  Column,\n  Paging,\n  Pager,\n  Editing,\n  Popup,\n  Toolbar,\n  Item,\n  RequiredRule,\n} from \"devextreme-react/data-grid\";\nimport { TextField, Button } from \"@material-ui/core\";\n\nimport { useForm, Controller } from \"react-hook-form\";\n\n// Toast\nimport { toast } from \"react-toastify\";\nimport \"react-toastify/dist/ReactToastify.css\";\nimport useGetData from \"./../PopUpStudent/hooks/useGetData\";\nimport useDeleteData from \"./../PopUpStudent/hooks/useDeleteData\";\nimport useCreateData from \"./../PopUpStudent/hooks/useCreateData\";\nimport useUpdateData from \"./../PopUpStudent/hooks/useUpdateData\";\nconst allowedPageSizes = [5, 10, \"all\"];\n\n/////////\ntoast.configure();\nconst BatchStudent = () => {\n  const {\n    refetchStudent,\n\n    dataStudent,\n    isErrorStudent,\n    isLoadingStudent,\n  } = useGetData();\n  const studentDataSource = new DataSource({\n    store: new ArrayStore({\n      key: \"id\",\n      data: dataStudent,\n\n      // Other ArrayStore properties go here\n    }),\n    // Other DataSource properties go here\n\n    reshapeOnPush: true,\n  });\n  //State\n  const [isLoadingPanel, setIsLoadingPanel] = useState(false);\n\n  const [changes, setChanges] = useState([]);\n  const [editRowKey, setEditRowKey] = useState(null);\n  const createMutation = useCreateData();\n  const updateMutation = useUpdateData();\n  const deleteMutation = useDeleteData();\n  // Save params\n  const gridRef = useRef(null);\n\n  const renderButton = (cell) => {\n    return (\n      <div style={{ display: \"flex\", justifyContent: \"space-between\" }}>\n        <Button\n          variant=\"contained\"\n          onClick={() => {\n            gridRef.current?.instance?.deleteRow(cell.rowIndex);\n          }}\n        >\n          remove\n        </Button>\n        <Button\n          variant=\"contained\"\n          // disabled={isAddButtonVisible}\n          onClick={() => {\n            gridRef.current?.instance?.undeleteRow(cell.rowIndex);\n          }}\n        >\n          unremove\n        </Button>\n      </div>\n    );\n  };\n\n  const onChangesChange = React.useCallback((changes) => {\n    console.log(\"change: \" + changes);\n    setChanges(changes);\n  }, []);\n  const onCellClick = (e) => {\n    gridRef.current?.instance?.editCell(e.rowIndex, e.columnIndex);\n  };\n\n  // Note usually that Create Field default when add row\n  const onInitRow = (e) => {\n    e.data.createDate = new Date();\n    // e.data.id = Math.ceil(Math.random() * (10000 - 100) + 100);\n  };\n  const onEditRowKeyChange = React.useCallback((editRowKey) => {\n    console.log(editRowKey);\n    setEditRowKey(editRowKey);\n  }, []);\n  const onSaving = React.useCallback(\n    (e) => {\n      // e.cancel = true;\n      gridRef.current?.instance?.beginUpdate();\n      const data = e.changes;\n      for (let i = 0; i < data.length; i++) {\n        if (data[i].type === \"insert\") {\n          createMutation.mutate(data[i].data);\n\n          console.log(\"INSERT\");\n        } else if (data[i].type === \"update\") {\n          updateMutation.mutate(data[i].data);\n\n          console.log(\"UPDATE\");\n        } else {\n          deleteMutation.mutate(data[i].key.id);\n          console.log(\"REMOVE\");\n        }\n      }\n      gridRef.current?.instance?.endUpdate() ;\n    },\n    [createMutation, updateMutation, deleteMutation]\n  );\n  return isLoadingStudent ? (\n    <div>Loading...</div>\n  ) : isErrorStudent ? (\n    <div>An error while fetching posts</div>\n  ) : (\n    <div>\n      <div className=\"main__title\">\n        <h1>Manage Data Student</h1>\n      </div>\n\n      <div className=\"main__Add\"></div>\n      <div className=\"main__body\">\n        <DataGrid\n          // keyExpr=\"id\"\n          showBorders\n          dataSource={dataStudent}\n          remoteOperations={true}\n          ref={gridRef}\n          repaintChangesOnly={true}\n          onCellClick={onCellClick}\n          onInitNewRow={onInitRow}\n          onSaving={onSaving}\n          loadPanel\n          onSaved={onSaved}\n        >\n        <LoadPanel\n                shadingColor=\"rgba(0,0,0,0.4)\"\n                visible={isLoadingPanel}\n                showIndicator={true}\n                shading={true}\n                showPane={true}\n              />\n          <Paging defaultPageSize={5} />\n          <Pager\n            visible={true}\n            allowedPageSizes={allowedPageSizes}\n            displayMode=\"compact\"\n          />\n          <Editing\n            mode=\"batch\"\n            useIcons={true}\n            changes={changes}\n            onChangesChange={onChangesChange}\n            editRowKey={editRowKey}\n            onEditRowKeyChange={onEditRowKeyChange}\n          >\n            <TextField label=\"Student\"></TextField>\n          </Editing>\n\n          <Column dataField=\"nameStudent\" dataType=\"string\">\n            {\" \"}\n            <RequiredRule />\n          </Column>\n          <Column dataField=\"phoneStudent\" dataType=\"string\">\n            {\" \"}\n            <RequiredRule />\n          </Column>\n          <Column dataField=\"dateOfBirth\" dataType=\"date\" format=\"dd/MM/yyyy\">\n            {\" \"}\n            <RequiredRule />\n          </Column>\n          <Column\n            dataField=\"createDate\"\n            dataType=\"date\"\n            visible={false}\n            defaultSortOrder=\"asc\"\n            // value={date}\n          />\n\n          <Column dataField=\"scoreStudent\" dataType=\"number\">\n            {\" \"}\n            <RequiredRule />\n          </Column>\n          <Column dataField=\"\" cellRender={renderButton}></Column>\n\n          <Toolbar>\n            <Item location=\"after\">\n              <Button\n                variant=\"contained\"\n                icon=\"refresh\"\n                onClick={() => gridRef.current?.instance?.cancelEditData()}\n              >\n                Discard\n              </Button>\n            </Item>\n            <Item location=\"after\">\n              <Button\n                variant=\"contained\"\n                icon=\"refresh\"\n                onClick={() => {gridRef.current?.instance?.saveEditData();\n                setIsLoadingPanel(true)\n                }}\n                viable={false}\n              >\n                Save\n              </Button>\n            </Item>\n            <Item>\n              <Button\n                variant=\"contained\"\n                onClick={() => gridRef.current?.instance?.addRow()}\n              >\n                add\n              </Button>\n            </Item>\n          </Toolbar>\n        </DataGrid>\n      </div>\n\n      {/* ///React Hook Form + Material Setup */}\n    </div>\n  );\n};\n//Create content customize Form\n\nexport default BatchStudent;\n"]},"metadata":{},"sourceType":"module"}